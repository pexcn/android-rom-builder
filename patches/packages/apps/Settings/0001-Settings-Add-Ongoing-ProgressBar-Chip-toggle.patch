From 7bf4e0ac1298a17e8177de51a83889533054cb22 Mon Sep 17 00:00:00 2001
From: pexcn <pexcn97@gmail.com>
Date: Wed, 21 May 2025 09:26:03 +0000
Subject: [PATCH 1/2] Settings: Add Ongoing ProgressBar Chip toggle

ref: https://github.com/ProjectMatrixx/android_packages_apps_MatrixxSettings/commit/dc44266b655c76b7320fd48da22cebdefcc53480
Signed-off-by: pexcn <pexcn97@gmail.com>
---
 res/values-zh-rCN/custom_strings.xml | 3 +++
 res/values/custom_strings.xml        | 4 ++++
 res/xml/display_settings.xml         | 7 +++++++
 3 files changed, 14 insertions(+)

diff --git a/res/values-zh-rCN/custom_strings.xml b/res/values-zh-rCN/custom_strings.xml
index c2ea410..735091c 100644
--- a/res/values-zh-rCN/custom_strings.xml
+++ b/res/values-zh-rCN/custom_strings.xml
@@ -267,4 +267,7 @@
     <!-- Access QS on lockscreen -->
     <string name="show_qs_on_secure_keyguard_title">快速设置</string>
     <string name="show_qs_on_secure_keyguard_summary">允许在锁屏界面使用快速设置</string>
+    <!-- Ongoing action chip -->
+    <string name="ongoing_action_chip_title">通知进度条</string>
+    <string name="ongoing_action_chip_summary">在状态栏中显示通知进度条</string>
 </resources>
diff --git a/res/values/custom_strings.xml b/res/values/custom_strings.xml
index b7a3784..969ea61 100644
--- a/res/values/custom_strings.xml
+++ b/res/values/custom_strings.xml
@@ -316,4 +316,8 @@
     <string name="show_qs_on_secure_keyguard_title">Quick settings</string>
     <string name="show_qs_on_secure_keyguard_summary">Allow toggling quick settings on secure lockscreen</string>
 
+    <!-- Ongoing action chip -->
+    <string name="ongoing_action_chip_title">Enable Ongoing ProgressBar Chip</string>
+    <string name="ongoing_action_chip_summary">Show progressbar chip in statusbar which features ongoing action progress from a notification</string>
+
 </resources>
diff --git a/res/xml/display_settings.xml b/res/xml/display_settings.xml
index 5e6903e..4c38a13 100644
--- a/res/xml/display_settings.xml
+++ b/res/xml/display_settings.xml
@@ -100,6 +100,13 @@
             android:summary="@string/icon_manager_summary">
             <intent android:action="com.android.settings.action.STATUS_BAR_TUNER" />
         </Preference>
+
+        <com.android.settings.custom.preference.SystemSettingSwitchPreference
+            android:key="config_enableOngoingProgressBarChip"
+            android:title="@string/ongoing_action_chip_title"
+            android:summary="@string/ongoing_action_chip_summary"
+            android:defaultValue="false"
+            android:persistent="true"/>
     </PreferenceCategory>
 
     <PreferenceCategory
-- 
2.43.0

