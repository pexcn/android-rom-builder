From 013c14f6892dabed6c07e5ede4e4d030127285b7 Mon Sep 17 00:00:00 2001
From: Ghosuto <clash.raja10@gmail.com>
Date: Sun, 30 Mar 2025 19:41:23 +0000
Subject: [PATCH 16/24] SystemUI: Minor improvements in ongonig chip

---
 .../layout/status_bar_ongoing_action_chip.xml | 24 +++++++++----------
 .../OnGoingActionProgressController.java      |  5 ++++
 2 files changed, 17 insertions(+), 12 deletions(-)

diff --git a/packages/SystemUI/res/layout/status_bar_ongoing_action_chip.xml b/packages/SystemUI/res/layout/status_bar_ongoing_action_chip.xml
index 3b36b5678..74aa55a18 100644
--- a/packages/SystemUI/res/layout/status_bar_ongoing_action_chip.xml
+++ b/packages/SystemUI/res/layout/status_bar_ongoing_action_chip.xml
@@ -18,24 +18,24 @@
 <LinearLayout
     xmlns:android="http://schemas.android.com/apk/res/android"
     android:id="@+id/ongoing_action_chip"
-    android:layout_width="60dp"
-    android:layout_height="16sp"
-    android:maxWidth="120dp"
-    android:minWidth="60dp"
+    android:layout_width="65dp"
+    android:layout_height="20dp"
+    android:maxWidth="160dp"
+    android:minWidth="80dp"	
     android:orientation="horizontal"
     android:layout_gravity="center_vertical|start"
-    android:padding="4sp"
-    android:layout_marginLeft="3dp"
+    android:padding="4dp"
+    android:layout_marginLeft="4dp"
     android:visibility="gone"
     android:background="@drawable/action_chip_container_background"
     android:clickable="true"
     android:focusable="true" >
 
     <ImageView
-	    android:id="@+id/ongoing_action_app_icon"
-        android:layout_width="8sp"
-	    android:layout_height="8sp"
-	    android:gravity="center_vertical|start"
+	android:id="@+id/ongoing_action_app_icon"
+        android:layout_width="9dp"
+	android:layout_height="9dp"
+	android:gravity="center_vertical|start"
         android:scaleType="centerInside"
         android:contentDescription="App icon"
         android:tint="@android:color/transparent"
@@ -46,10 +46,10 @@
         android:layout_height="0dp" />
 
     <ProgressBar
-	    android:id="@+id/app_action_progress"
+	android:id="@+id/app_action_progress"
         style="?android:attr/progressBarStyleHorizontal"
         android:layout_width="wrap_content"
-        android:layout_height="8sp"
+        android:layout_height="9dp"
         android:layout_weight="1"
         android:gravity="center_vertical"
         android:indeterminate="false"
diff --git a/packages/SystemUI/src/com/android/systemui/statusbar/OnGoingActionProgressController.java b/packages/SystemUI/src/com/android/systemui/statusbar/OnGoingActionProgressController.java
index 411bebd24..69c481e46 100644
--- a/packages/SystemUI/src/com/android/systemui/statusbar/OnGoingActionProgressController.java
+++ b/packages/SystemUI/src/com/android/systemui/statusbar/OnGoingActionProgressController.java
@@ -49,6 +49,8 @@ import com.android.systemui.statusbar.OnGoingActionProgressGroup;
 import com.android.systemui.statusbar.policy.KeyguardStateController;
 import com.android.systemui.statusbar.util.MediaSessionManagerHelper;
 
+import com.android.internal.util.tenx.VibrationUtils;
+
 /** Controls the ongoing progress chip based on notifications @LineageExtension */
 public class OnGoingActionProgressController implements NotificationListener.NotificationHandler, KeyguardStateController.Callback {
     private static final String TAG = "OngoingActionProgressController";
@@ -148,6 +150,7 @@ public class OnGoingActionProgressController implements NotificationListener.Not
             } else {
                 openTrackedApp();
             }
+            VibrationUtils.triggerVibration(mContext, 3);
             return true;
         }
 
@@ -156,6 +159,7 @@ public class OnGoingActionProgressController implements NotificationListener.Not
             if (mShowMediaProgress && mMediaSessionHelper.isMediaPlaying()) {
                 toggleMediaPlaybackState();
             }
+            VibrationUtils.triggerVibration(mContext, 4);
             return true;
         }
 
@@ -164,6 +168,7 @@ public class OnGoingActionProgressController implements NotificationListener.Not
             if (mShowMediaProgress && mMediaSessionHelper.isMediaPlaying()) {
                 openMediaApp();
             }
+            VibrationUtils.triggerVibration(mContext, 5);
         }
 
         @Override
-- 
2.43.0

